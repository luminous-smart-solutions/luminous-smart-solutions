<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - {% block title %}{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self'; 
        script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com; 
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; 
        font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
        img-src 'self' data: https:;
        connect-src 'self' https://luminous-repo.onrender.com;
    ">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.7.0/css/select.dataTables.min.css">

    <style>
        :root { --primary-accent-light: #4f46e5; }
        .nav-link { display: block; padding: 0.75rem 1rem; border-radius: 0.5rem; transition: background-color 0.2s; cursor: pointer; }
        .nav-link:hover { background-color: #374151; }
        .nav-link.active { background-color: #4f46e5; color: white; }
        /* DataTables Customizations for Dark Mode */
        .dataTables_wrapper { color: #d1d5db; }
        .dataTables_length select, .dataTables_filter input { background-color: #374151; border: 1px solid #4b5563; padding: 0.5rem; border-radius: 0.375rem; }
        .dataTables_paginate .paginate_button { background-color: #374151 !important; border: 1px solid #4b5563 !important; color: #d1d5db !important; margin: 0 2px !important; border-radius: 0.375rem !important; }
        .dataTables_paginate .paginate_button.current { background-color: #4f46e5 !important; border-color: #4f46e5 !important; }
        .dataTables_paginate .paginate_button:hover { background-color: #4b5563 !important; border-color: #4b5563 !important; }
        .dt-button { background-color: #4b5563 !important; color: white !important; border: none !important; border-radius: 0.375rem !important; padding: 0.5rem 1rem !important; }
        .dt-button:hover { background-color: #374151 !important; }
        table.dataTable tbody tr.selected { background-color: #4f46e5 !important; }
        table.dataTable tbody > tr.selected, table.dataTable tbody > tr > .selected { background-color: #4f46e5 !important; }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans">
    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800 p-6 min-h-screen flex flex-col">
            <h1 class="text-3xl font-bold text-indigo-400 mb-8">Admin Panel</h1>
            <nav class="space-y-2 flex-grow">
                <a href="{{ url_for('admin.dashboard') }}" class="nav-link {% if request.endpoint == 'admin.dashboard' %}active{% endif %}"><i class="fas fa-qrcode w-6 text-center mr-2"></i>QR Generator</a>
                <a href="{{ url_for('admin.users') }}" class="nav-link {% if request.endpoint == 'admin.users' %}active{% endif %}"><i class="fas fa-users w-6 text-center mr-2"></i>Users</a>
                <a href="{{ url_for('admin.boards') }}" class="nav-link {% if request.endpoint == 'admin.boards' %}active{% endif %}"><i class="fas fa-server w-6 text-center mr-2"></i>Boards</a>
                <a href="{{ url_for('admin.email') }}" class="nav-link {% if request.endpoint == 'admin.email' %}active{% endif %}"><i class="fas fa-paper-plane w-6 text-center mr-2"></i>Mass Email</a>
            </nav>
            <a href="{{ url_for('admin.logout') }}" class="nav-link text-red-400 hover:bg-red-500 hover:text-white mt-4"><i class="fas fa-sign-out-alt w-6 text-center mr-2"></i>Logout</a>
        </aside>

        <!-- Main Content -->
        <main class="flex-grow p-8">
            {% block admin_content %}{% endblock %}
        </main>
    </div>

    <!-- JQuery and DataTables JS -->
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrious/dist/qrious.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/select/1.7.0/js/dataTables.select.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>

    {% block page_scripts %}{% endblock %}
</body>
</html>
